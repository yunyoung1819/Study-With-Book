## 6장. 컴포넌트 반복

### 자바스크립트 배열의 map() 함수

- 자바스크립트 배열 객체의 내장 함수인 map 함수를 사용하여 반복되는 컴포넌트를 렌더링할 수 있다.
- map 함수는 파라미터로 전달된 함수를 사용하여 배열 내 각 요소를 프로세싱한 후 그 결과로 새로운 배열을 생성한다..

```
arr.map(callback, [thisArg])
```

- callback: 새로운 배열의 요소를 생성하는 함수로 파라미터는 아래 세가지이다.
    - currentValue: 현재 처리하고 있는 요소
    - index: 현재 처리하고 있는 요소의 index 값
    - array: 현재 처리하고 있는 원본 배열
- thisArg(선택항목): callback 함수 내부에서 사용할 this 레퍼런스

- map 함수는 기존 배열로 새로운 배열을 만드는 역할을 한다. 

```

const numbers = [1,2,3,4,5];
const result = numbers.map(num => num * num);
console.log(result);

```


### key

- 리액트에서 key는 컴포넌트 배열을 렌더링했을 때 어떤 원소에 변동이 있었는지 알아내려고 사용한다.
- 예를 들어 유동적인 데이터를 다룰 때는 원소를 새로 생성할 수도, 제거할 수도, 수정할 수도 있다.

- key가 없을 때는 가상 DOM을 비교하는 과정에서 리스트를 순차적으로 비교하면서 변화를 감지한다.
- 하지만 key가 있다면 이 값을 사용하여 어떤 변화가 일어났는지 더욱 빠르게 알아낼 수 있다.


### key 값 설정

- key 값을 설정할 때는 map 함수의 인자로 전달되는 함수 내부에서 컴포넌트 props를 설정하듯이 설정한다.
- Key 값은 언제나 유일해야 한다.
- 따라서 데이터가 가진 고유값을 key값으로 설정해야 한다. 


### 전개 연산자

- ... 문법을 ES6의 전개 연산자(spread operator)라고 한다.
- 이 문법이 하는 역할은 ... 뒤에 위치한 배열 값을 그대로 꺼내서 현재 배열에 복사하는 것이다.
- 전개 연산자를 사용한 이유은 소스코드의 간결함과 가독성 때문이다. 

```

const numbers = [1, 2, 3, 4, 5];
const moreNumbers = [...numbers, 6];    // [1, 2, 3, 4, 5, 6];

```


### filter

- 해당 함수는 배열에서 특정 조건을 만족하는 값들만 추출하여 새로운 배열을 만든다. 


### 정리

- 컴포넌트 배열을 렌더링할 떄는 key 값 설정에 하상 주의해야 한다.
- 또 key값은 언제나 유일해야 한다.
- key값이 중복된다면 렌더링 과정에서 오류가 발생한다.
- 상태 안에서 배열을 변형할 때는 배열에 직접 접근하여 수정하는 것이 아니라 concat, slice, 전개 연산자, filter 함수 등을 사용해서 새로운 배열을 만든 후, setState 메서드로 적용한다. 