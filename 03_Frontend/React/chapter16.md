## 16장. react-router로 SPA 개발

### SPA란?

- SPA는 Single Page Application, 즉 싱글 페이지 애플리케이션의 약어
- 페이지가 한 개인 애플리케이션
- 싱글 페이지 애플리케이션은 서버에서 제공하는 페이지가 하나이지만, 로딩을 한번 하고 나면 웹 브라우저에서 나머지 페이지들을 정의
- 페이지에 들어온 후 다른 페이지로 이동할 때는 서버에 새로운 페이지를 요청하는 것이 아니라,
새 페이지에서 필요한 데이터만 받아와 그에 따라 웹 브라우저가 다른 종류의 뷰를 만들어준다,
- SPA 단점은 앱 규모가 커지면 자바스크립트 파일 크기도 너무 커진다는 것
- 코드 스플리팅을 사용하면 라우트별로 파일을 나누어 트래픽과 로딩 속도를 개선할 수 있음


### 라우팅

- 주소에 따라 다른 뷰를 보여주는 것
- 리액트 자체에 이 기능이 내장되어 있지는 않지만, 라우팅 관련 라이브러리인 react-router를 설치하여 구현할 수 있음
- 리액트 라우터를 사용하면 페이지 주소를 변경했을 때 주소에 따라 다른 컴포넌트를 렌더링해주고, 주소 정보(파라미터, URL 쿼리 등)를
컴포넌트의 props로 전달해서 컴포넌트 단에서 주소 상태에 따라 다른 작업을 하도록 설정할 수 있음


### BrowserRouter

- HTML5의 history API를 사용하여 새로고침하지 않고도 페이지 주소를 교체할 수 있게함


### location

- location: 현재 페이지의 주소 상태를 알려줌. 이 location 값은 어떤 라우트 컴포넌트에서 조회하든 같다. 
주로 search 값에서 URL Query를 읽는데 사용하거나 주소가 바뀐 것을 감지하는데 사용함


### match

- match: <Route> 컴포넌트에서 설정한 path와 관련된 데이터들을 조회할 때 사용함.
- 현재 URL이 같을지라도 다른 라우트에서 사용된 match는 다른 정볼르 알려줌.
- match 객체는 주로 params를 조회하거나 서브 라우트를 만들 때 현재 path를 참조하는데 사용함


### history

- history는 현재 라우터를 조작할 때 사용한다.
- 예를 들어 뒤쪽 페이지로 넘어가거나, 다시 앞쪽 페이지로 가거나, 새로운 주소로 이동해야할 때 이 객체가 지닌
함수들을 호출한다.

- 이 객체에서 헷갈릴 수 있는 함수는 push와 replace 이다.
- replace: Push와 차이점은 페이지 방문 기록을 남기지 않아서 페이지 이동 후 뒤로가기 버튼을 눌렀을 때
방금 전의 페이지가 아니라 방금 전의 전 페이지가 나타난다. 

- action: 현재 history 상태를 알려준다.
- black: 페이지에서 벗어날 때, 사용자에게 정말 페이지를 떠나겠냐고 묻는 창을 띄운다. 

```
const unblock = history.block('정말로 떠나시겠습니까?');
unblock();  // 막는 작업을 취소할 때 
```

- go, goBack, goForward: 이전 페이지 또는 다음 페이지로 이동하는 함수


### withRouter

- 라우트 내부 또는 외부 컴포넌트에서는 history, location, match 등 값을 사용할 수 없다.
- 이떄는 withRouter를 사용하여 해당 props에 접근할 수 있다.
- withRouter를 리액트 라우터에서 불러온 후, 컴포넌트를 내보낼 때 withRouter 함수로 감싸주면
해당 컴포넌트에서도 history 등 객체를 사용할 수 있다. 