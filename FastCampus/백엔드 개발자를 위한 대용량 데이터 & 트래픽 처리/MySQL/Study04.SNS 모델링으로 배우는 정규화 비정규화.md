# :book: 백엔드 개발자를 위한 대용량 데이터 & 트래픽 처리
## :pushpin: Chapter 04. SNS 모델링으로 배우는 정규화 / 비정규화
### :seedling: 01. 정규화 - 비정규화 핵심 

### 정규화란 무엇인가
- 중복을 최소화하게 데이터를 구조화하는 프로세스를 `정규화(Normalization)`라고 한다.
- 정규화를 소설에 비유하면 **철수**는 밥을 먹었다. -> {주인공 설정집.1page.이름}는 밥을 먹었다.
- **중복을 제거, 한 곳에서만 데이터를 관리**
- 읽을 때는 항상 원본 데이터를 참조 
- **테이블 설계 관점에서 조회와 쓰기 사이의 트레이드 오프**

### 비정규화 (반정규화)
- {주인공 설정집.1page.이름}는 밥을 먹었다 -> 철수는 밥을 먹었다.

### 정규화 / 비정규화 비교
| 정규화              | 반정규화(비)        |
|------------------|----------------|
| 중복을 제거하고 한 곳에서 관리 | 중복을 허용         |
| 데이터 정합성 유지가 쉬움   | 데이터 정합성 유지가 어려움 |
| 읽기시 참조 발생        | 참조없이 읽기 가능     |


### :seedling: 02. 정규화 실습

### 회원 정보 요구사항
```
회원정보 관리
- 이메일, 닉네임, 생년월일을 입력받아 저장한다.
- 닉네임은 10자를 초과할 수 없다.
- 회원은 닉네임을 변경할 수 있다.
    - 회원의 닉네임 변경 이력을 조회할 수 있어야 한다.
```

### :seedling: 03. 실무에서의 정규화 / 비정규화에 대한 고민들
### 중복된 데이터이면 반드시 정규화를 해야하는 걸까?
- 사실 실무에서 중복 데이터면 기계적으로 정규화 하는 분들이 종종 있다.
- **정규화도 비용이다.** 읽기 비용을 지불하고 쓰기 비용을 줄이는 것 

### 정규화시 고려해야 하는 것
- 얼마나 빠르게 데이터의 최신성을 보장해야 하는가?
- 히스토리성 데이터는 오히려 정규화를 하지 않아야 한다.
- 데이터 변경 주기와 조회 주기는 어떻게 되는가?
- 객체(테이블) 탐색 깊이가 얼마나 깊은가

### 정규화를 하기로 했다면 읽기시 데이터를 어떻게 가져올 것인가?
- 테이블 `조인`을 많이 활용하는데 이건 사실 고민해볼 문제다.
- 테이블 `조인`은 서로 다른 테이블의 결합도를 엄청나게 높인다.
- 조회 시에는 성능이 좋은 별도 데이터베이스나 캐싱 등 다양한 최적화 기법을 이용할 수 있다.
- 조인을 사용하게 되면 이런 기법들을 사용하는데 제한이 있거나 더 많은 리소스가 들 수 있다.
- 읽기 쿼리 한번 더 발생되는 것은 그렇게 큰 부담이 아닐 수도 있다.